<title>進級・卒業管理</title>
<link rel="stylesheet" th:href="@{/css/style.css}">
<link rel="stylesheet" th:href="@{/css/student_promotion.css}">

<!-- サーバーサイドで base/header.html の header-content フラグメントを挿入 -->
<div id="header-container" th:insert="~{base/header :: header}"></div>

<body>
<section class="student-promotion">
  <h2>進級・卒業管理</h2>
  <p>年度末の更新対象者一覧です。留年者などの場合はチェックを外してください。</p>

  <form class="promotion-form" th:action="@{/student/promotion}" method="post">
    <table class="student-table">
      <thead>
        <tr>
          <th>対象</th>
          <th>学生番号</th>
          <th>氏名</th>
          <th>所属学科</th>
          <th>クラス</th>
          <th>次年度予定</th>
          <th>処理種別</th>
        </tr>
      </thead>
      <tbody>
        <tr th:each="c : ${candidates}">
          <td>
            <input type="checkbox" th:name="studentIds" th:value="${c.userId}" th:checked="${c.isRecommended}">
          </td>
          <td th:text="${c.userId}"></td>
          <td th:text="${c.userName}"></td>
          <td th:text="${c.courseName}"></td>
          <td th:text="${c.currentClass}"></td>
          <td th:text="${c.nextClass}"
            th:style="${c.actionType == 'GRADUATION' ? 'color:blue; font-weight:bold;' : ''}">
          </td>
          <td>
              <span th:if="${c.actionType == 'PROMOTION'}" class="badge-promotion">進級</span>
              <span th:if="${c.actionType == 'GRADUATION'}" class="badge-graduation">卒業</span>
              <span th:if="${c.actionType == 'STAY'}" class="badge-stay">休学継続</span>
          </td>
      </tbody>
    </table>

    <div class="form-buttons">
      <button type="submit" onclick="return confirm('選択した学生の更新を実行しますか？')" class="btn">実行</button>
      <button th:onclick="|location.href='@{/student}'|" class="btn">戻る</button>
    </div>
  </form>

</section>
